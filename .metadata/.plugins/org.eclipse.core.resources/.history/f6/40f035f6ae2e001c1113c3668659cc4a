<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.sql.*"%>
<html>
	<head>
		<title>Insert title here</title>
		<style type="text/css">
			div{
				border-width: 100px;
				text-align: center;
			}
			.span1{
				font-size: 35px;
			}
			.left_span {
				float: left;
			}
			.right_span{
				float: right;
			}
			#theDiv{
				clear: both;
			}
		</style>
	</head>
	<body>
			<%
				String name = request.getParameter("name");
				if("".equals(name)) {
					out.println("查询失败！");
				}
				Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/students", "root", "123456");
				Statement stat = conn.createStatement();
				/*
					类中的变量不用初始化
					方法中的局部变量必须初始化
				*/
				ResultSet result = null;
				if("*".equals(name)) {
					String sql = "SELECT * FROM students_for_javaweb";
					result = stat.executeQuery(sql);
				}
				else {
					String sql = "SELECT * FROM students_for_javaweb WHERE name = '" + name + "'";
					result = stat.executeQuery(sql);
					stat.close();
					conn.close();
				}
				String str = "";
				str += "<div><span class=\"left_span\"><span class=\"span1\">name</span></span>";
				str += "<span class=\"right_span\"><span class=\"span1\">id</span></span>";
				str += "<div id=\"theDiv\"></div>";
				int count = 0;
				while(result.next()) {
					count++;
					str += "<span class=\"left_span\">" + result.getString(1) + "</span>";
					str += "<span class=\"right_span\">" + result.getString(2) + "</span>";
					str += "<br>";
				}
				str += "</div>" + count + " row(s) in set";
				out.println(str);
			%>
		<form action="selectPage.html">
			<input type="submit" value="继续查询">
		</form>
	</body>
</html>