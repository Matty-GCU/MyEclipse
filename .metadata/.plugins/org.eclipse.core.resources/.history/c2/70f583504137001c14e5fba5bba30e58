<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" import="java.util.*"%>
<html>
	<head>
		<title>Insert title here</title>
		<meta charset="utf-8">
	</head>
	<body>
		<%
			application.setAttribute("account", new ArrayList<String>());
			ArrayList<String> account = (ArrayList<String>) application.getAttribute("account");
			if(account == null) {
				account = new ArrayList<>();
				application.setAttribute("account", account);
			}
			String newAccount = request.getParameter("newAccount");
			String psw = request.getParameter("psw");
			if(newAccount != null && psw != null && !"".equals(newAccount) && ! "".equals(psw)) {
				account.add(new String(newAccount.getBytes("ISO-8859-1"), "UTF-8"));
			}
		%>
		<form action="#" method="post">
			账号：<input type="text" name="newAccount"><br>
			密码：<input type="password" name="psw"><br>
			<input type="submit" value="进入聊天室">
		</form>
		聊天室在线人员：<br>
		<%
			for(String s: account) {
				out.println(s + "<br>");
			}
		%>
	</body>
</html>