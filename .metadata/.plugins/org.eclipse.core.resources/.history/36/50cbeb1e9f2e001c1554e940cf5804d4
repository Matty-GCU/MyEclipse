<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.sql.*"%>
<html>
	<head>
		<title>Insert title here</title>
	</head>
	<body>
		<%
			String oldName = request.getParameter("oldName");
			String newName = request.getParameter("newName");
			String newId = request.getParameter("newId");
			out.println(oldName);
			out.println(newName);
			out.println(newId);
			Class.forName("com.mysql.cj.jdbc.Driver");
			Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/students", "root", "123456");
			Statement stat = conn.createStatement();
			String sql = null;
			if("".equals(oldName)) {
				out.println("温馨提醒：<br>修改时，必须填写原姓名（主键）。");
			}
			else if("".equals(newName)) {
				sql = "UPDATE students_for_javaweb SET id = '" + newId + "' WHERE name = '" + oldName + "'";
			}
			else {
				sql = "UPDATe students_for_javaweb SET name = '" + newName + "', id = '" + newId + "' WHERE name = '" + oldName + "'";
			}
			stat.execute(sql);
			stat.close();
			conn.close();
			out.println("成功修改一条记录！");
		%>
		<form action="updatePage.html">
			<input type="submit" value="继续修改">
		</form>
	</body>
</html>